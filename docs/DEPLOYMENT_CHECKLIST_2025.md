# ✅ 部署检查清单

> 使用此清单确保部署过程顺利完成

---

## 📋 部署前准备

### 1. 账号注册

- [ ] GitHub 账号已注册
- [ ] Supabase 账号已注册
- [ ] 阿里云账号已注册 (推荐)
- [ ] 高德地图开放平台账号已注册
- [ ] Vercel 账号已注册 (如使用 Vercel 部署)

### 2. API 密钥获取

#### Supabase (必需)
- [ ] 创建 Supabase 项目
- [ ] 获取 `Project URL`
- [ ] 获取 `anon public` key
- [ ] 执行数据库初始化 SQL (`docs/database_setup.sql`)
- [ ] 验证数据表创建成功

#### 高德地图 (必需)
- [ ] 创建应用
- [ ] 添加 Web 端 Key
- [ ] 获取 `Key`
- [ ] 获取 `Secret` (可选)
- [ ] 验证 Key 可用

#### 阿里云百炼 (推荐)
- [ ] 开通百炼服务
- [ ] 创建 API Key
- [ ] 获取 API Key
- [ ] 确认有可用额度
- [ ] 测试 API 调用

#### 科大讯飞 (可选)
- [ ] 创建应用
- [ ] 开通语音听写服务
- [ ] 获取 `APPID`
- [ ] 获取 `APIKey`
- [ ] 获取 `APISecret`

### 3. 代码准备

- [ ] 代码已推送到 GitHub
- [ ] 所有 TypeScript 错误已修复
- [ ] ESLint 检查通过 (0 错误)
- [ ] 本地测试通过
- [ ] `.gitignore` 包含 `.env` 文件

---

## 🌟 Vercel 部署检查清单

### 第一步: GitHub 准备

- [ ] 代码已推送到 GitHub
- [ ] 仓库可访问 (Public 或 Private)
- [ ] 分支名称为 `main` 或 `master`
- [ ] 最新代码已提交

### 第二步: Vercel 配置

- [ ] 已登录 Vercel
- [ ] 已授权 GitHub 访问
- [ ] 已导入项目
- [ ] Framework Preset 设置为 `Vite`
- [ ] Build Command: `cd frontend && npm install && npm run build`
- [ ] Output Directory: `frontend/dist`
- [ ] Root Directory: `./`

### 第三步: 环境变量配置

- [ ] `VITE_SUPABASE_URL` 已添加
- [ ] `VITE_SUPABASE_ANON_KEY` 已添加
- [ ] `VITE_AMAP_KEY` 已添加
- [ ] `VITE_ALIYUN_LLM_API_KEY` 已添加 (推荐)
- [ ] `VITE_ALIYUN_LLM_ENDPOINT` 已添加 (推荐)
- [ ] 所有环境变量已选择 Production, Preview, Development

### 第四步: 部署验证

- [ ] 点击 Deploy 开始部署
- [ ] 构建成功 (无错误)
- [ ] 访问部署的 URL
- [ ] 首页正常显示
- [ ] 可以注册/登录
- [ ] 可以创建行程
- [ ] AI 生成功能正常
- [ ] 地图显示正常
- [ ] 语音输入正常 (如配置)

---

## 🐳 Docker 部署检查清单

### 第一步: 服务器准备

- [ ] 服务器已准备 (至少 2GB RAM)
- [ ] Docker 已安装 (20.10+)
- [ ] Docker Compose 已安装 (2.0+)
- [ ] 防火墙已配置 (开放 80, 443, 3000, 3001 端口)
- [ ] 域名已解析到服务器 IP (如需要)

### 第二步: 代码部署

- [ ] 代码已克隆到服务器
- [ ] `.env` 文件已创建
- [ ] 所有环境变量已填写
- [ ] 环境变量格式正确

### 第三步: Docker 构建

- [ ] `docker-compose build` 执行成功
- [ ] 前端镜像构建成功
- [ ] 后端镜像构建成功
- [ ] 无构建错误

### 第四步: 服务启动

- [ ] `docker-compose up -d` 执行成功
- [ ] 前端容器运行中
- [ ] 后端容器运行中
- [ ] 容器健康检查通过
- [ ] 无错误日志

### 第五步: 访问验证

- [ ] `http://localhost:3000` 可访问
- [ ] `http://localhost:3001/health` 返回正常
- [ ] 应用功能正常
- [ ] 数据库连接正常
- [ ] API 调用正常

### 第六步: Nginx 配置 (生产环境)

- [ ] Nginx 已安装
- [ ] 配置文件已创建
- [ ] 反向代理配置正确
- [ ] Nginx 配置测试通过
- [ ] Nginx 已重启
- [ ] 通过域名可访问

### 第七步: HTTPS 配置

- [ ] Certbot 已安装
- [ ] SSL 证书已获取
- [ ] HTTPS 访问正常
- [ ] HTTP 自动跳转 HTTPS
- [ ] 证书自动续期已配置

---

## 🖥️ 传统服务器部署检查清单

### 第一步: 环境准备

- [ ] Node.js 22+ 已安装
- [ ] npm 已安装
- [ ] PM2 已安装
- [ ] Nginx 已安装

### 第二步: 代码构建

- [ ] 代码已克隆
- [ ] 根目录依赖已安装
- [ ] 前端依赖已安装
- [ ] 前端构建成功 (`npm run build`)
- [ ] `frontend/dist` 目录存在

### 第三步: PM2 配置

- [ ] 后端服务已启动
- [ ] 前端静态文件服务已启动
- [ ] PM2 配置已保存
- [ ] 开机自启已配置
- [ ] 服务运行正常

### 第四步: Nginx 配置

- [ ] 配置文件已创建
- [ ] 反向代理配置正确
- [ ] 配置已启用
- [ ] Nginx 测试通过
- [ ] Nginx 已重启

### 第五步: HTTPS 配置

- [ ] SSL 证书已获取
- [ ] HTTPS 配置完成
- [ ] 访问正常

---

## 🧪 功能测试清单

### 基础功能

- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 用户登出功能正常
- [ ] 设置页面可访问

### 行程规划功能

- [ ] 可以创建新行程
- [ ] AI 生成行程正常
- [ ] 行程显示在地图上
- [ ] 可以编辑行程
- [ ] 可以删除行程
- [ ] 可以复制行程

### 预算管理功能

- [ ] 可以添加费用记录
- [ ] 费用统计正确
- [ ] 图表显示正常
- [ ] 可以删除费用记录

### 地图功能

- [ ] 地图正常加载
- [ ] 标记点正确显示
- [ ] 路线正确显示
- [ ] 可以点击标记查看详情

### 语音功能 (如配置)

- [ ] 语音输入按钮显示
- [ ] 可以录音
- [ ] 语音识别正常
- [ ] 识别结果正确

### AI 功能

- [ ] AI 对话正常
- [ ] 行程生成正常
- [ ] 预算分析正常
- [ ] 响应速度可接受

---

## 🔒 安全检查清单

- [ ] `.env` 文件未提交到 Git
- [ ] API 密钥未硬编码在代码中
- [ ] HTTPS 已启用 (生产环境)
- [ ] 数据库连接使用 SSL
- [ ] 敏感信息已加密存储
- [ ] CORS 配置正确
- [ ] 防火墙规则已配置

---

## 📊 性能检查清单

- [ ] 首页加载时间 < 3 秒
- [ ] AI 响应时间 < 10 秒
- [ ] 地图加载流畅
- [ ] 图片已优化
- [ ] 代码已压缩
- [ ] CDN 已启用 (Vercel 自动)

---

## 📝 文档检查清单

- [ ] README.md 已更新
- [ ] 部署文档已完善
- [ ] API 文档已编写
- [ ] 用户手册已提供
- [ ] 常见问题已整理

---

## 🎯 最终验证

### 用户体验测试

- [ ] 在 Chrome 浏览器测试通过
- [ ] 在 Firefox 浏览器测试通过
- [ ] 在 Safari 浏览器测试通过
- [ ] 在移动端浏览器测试通过
- [ ] 响应式设计正常

### 压力测试

- [ ] 可以处理多个并发用户
- [ ] 长时间运行稳定
- [ ] 内存使用正常
- [ ] CPU 使用正常

### 备份和恢复

- [ ] 数据库备份策略已制定
- [ ] 备份恢复已测试
- [ ] 日志记录已配置
- [ ] 监控告警已配置 (可选)

---

## ✅ 部署完成

恭喜！如果以上所有项目都已勾选，说明你的部署已经完成！

### 下一步

1. **监控应用运行状态**
   - 定期检查日志
   - 监控性能指标
   - 关注用户反馈

2. **持续优化**
   - 根据用户反馈改进功能
   - 优化性能
   - 修复 bug

3. **定期维护**
   - 更新依赖包
   - 更新 API 密钥
   - 备份数据

---

**部署日期**: _______________  
**部署人员**: _______________  
**部署环境**: _______________  
**应用 URL**: _______________

---

**祝你使用愉快！** 🎉

