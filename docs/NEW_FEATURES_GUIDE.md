# AI Web Planner - 新功能使用指南

本文档介绍最新添加的高级功能及其使用方法。

---

## 🚗 景点间交通规划

### 功能说明
AI 会自动为您规划景点之间的交通方案，无需手动查询。

### 使用方法
1. 创建行程时，正常输入您的旅行需求
2. AI 会在生成的行程中自动包含交通活动
3. 在行程卡片中，交通活动以**绿色背景**显示

### 显示内容
- 🚗 交通方式（步行、地铁、公交、出租车等）
- 📍 起点和终点
- 📝 详细说明（如地铁线路、站点）
- ⏱️ 预计时间
- 💰 预计费用

### 示例
```
🚗 交通
方式: 地铁
从: 天安门广场 → 到: 故宫博物院
详情: 乘坐地铁1号线，天安门东站上车，天安门西站下车
时间: 10分钟
费用: ¥3
```

---

## 🗺️ 真实路线规划

### 功能说明
使用高德地图 API，在地图上显示真实的道路路线，而不是直线连接。

### 使用方法
1. 在行程详情页面，点击地图右上角的**路线模式切换按钮**
2. 选择"驾车"或"步行"模式
3. 地图会自动显示真实的道路路线

### 功能特点
- **驾车模式**: 显示可行驶的道路路线
- **步行模式**: 显示步行路线，包括人行道
- **智能切换**: 距离小于 0.5km 自动使用步行模式
- **准确信息**: 显示实际距离和预计时间

### 操作提示
- 点击"驾车"按钮切换到驾车模式（蓝色高亮）
- 点击"步行"按钮切换到步行模式（蓝色高亮）
- 切换模式后，路线会自动重新规划

---

## ✈️ 城际交通信息

### 功能说明
AI 会为您提供出发地到目的地的航班或高铁参考信息。

### 使用方法
1. 创建行程时，告诉 AI 您的出发地（如"从上海出发"）
2. AI 会在第一天的行程中包含去程交通信息
3. 在最后一天的行程中包含返程交通信息

### 显示内容
- ✈️ 交通类型（航班/高铁）
- 🔢 车次号（参考）
- 📍 出发地和目的地
- ⏰ 出发和到达时间
- ⏱️ 飞行/行驶时间
- 💰 参考票价
- 📝 注意事项

### 示例
```
✈️ 城际交通

航班: CA1234（参考）
上海虹桥机场 → 北京首都机场
出发: 08:00 - 到达: 10:30
时长: 2小时30分钟
价格: ¥800

ℹ️ 建议提前2小时到达机场办理值机手续

⚠️ 以上信息仅供参考，实际票价和时刻请以购票平台为准
```

### 注意事项
- 城际交通信息仅供参考
- 实际购票请以官方平台为准
- 价格可能因时间、舱位等因素变化

---

## 🎤 费用语音录入

### 功能说明
使用语音快速录入旅行费用，AI 会自动识别金额和类别。

### 使用方法
1. 在预算管理页面，点击"添加费用"
2. 点击金额或描述字段旁的"语音输入"按钮
3. 说出费用信息，如"午餐花了50块"
4. AI 会自动识别并填充表单

### 支持的表达方式

#### 金额识别
- "50块" → ¥50
- "30元" → ¥30
- "花了100" → ¥100
- "100" → ¥100

#### 类别识别
- "午餐"、"晚餐" → 餐饮
- "出租车"、"地铁" → 交通
- "门票"、"景点" → 景点
- "酒店"、"住宿" → 住宿
- "购物"、"买" → 购物

### 使用技巧
- 说话清晰，语速适中
- 可以一次说出完整信息："午餐花了50块"
- 也可以分别输入金额和描述
- 如果识别不准确，可以手动修改

### 示例对话
```
用户: "午餐花了50块"
系统: ✅ 识别到金额: ¥50
      ✅ 识别到类别: 餐饮
      描述已填充: "午餐花了50块"
```

---

## 💰 预算超支提醒

### 功能说明
实时监控预算使用情况，在预算即将用完或已超支时自动提醒。

### 预警级别

#### 1. 黄色提醒（80%）
- **触发条件**: 预算使用达到 80%
- **提醒方式**: 页面顶部消息提示
- **显示内容**: 使用百分比、剩余预算

#### 2. 橙色预警（90%）
- **触发条件**: 预算使用达到 90%
- **提醒方式**: 弹窗警告
- **显示内容**: 
  - 总预算
  - 已花费
  - 剩余预算
  - 使用率
  - 优化建议

#### 3. 红色错误（100%）
- **触发条件**: 预算超支
- **提醒方式**: 错误弹窗
- **显示内容**:
  - 总预算
  - 已花费
  - 超支金额
  - 使用率
  - 详细建议

### 优化建议示例

**90% 预警建议**:
- 请注意控制后续支出，避免预算超支

**超支建议**:
- 调整后续行程，减少非必要开支
- 选择更经济的交通和住宿方式
- 考虑增加旅行预算

### 使用场景
1. **行程规划阶段**: 帮助您控制预算
2. **旅行进行中**: 实时了解花费情况
3. **费用记录后**: 立即获得预算反馈

---

## 🎯 功能组合使用

### 场景一：规划新行程
1. 使用语音输入告诉 AI 您的旅行需求
2. AI 生成包含交通规划的完整行程
3. 在地图上查看真实路线
4. 查看城际交通参考信息

### 场景二：记录旅行费用
1. 旅行中产生费用时，打开预算管理页面
2. 使用语音快速录入："午餐花了50块"
3. 系统自动识别并保存
4. 如果预算紧张，立即收到提醒

### 场景三：优化行程路线
1. 查看 AI 生成的行程
2. 在地图上切换驾车/步行模式
3. 根据实际路线调整行程顺序
4. 优化交通方式和时间安排

---

## 💡 使用技巧

### 1. 语音输入技巧
- 在安静环境中使用
- 说话清晰，避免口音过重
- 可以多次尝试，直到识别准确
- 识别后可以手动修改

### 2. 地图路线技巧
- 短距离景点使用步行模式
- 长距离景点使用驾车模式
- 注意查看预计时间，合理安排行程
- 可以截图保存路线信息

### 3. 预算管理技巧
- 设置合理的总预算
- 及时记录每笔费用
- 关注预算提醒
- 根据建议调整支出

### 4. 行程规划技巧
- 告诉 AI 您的出发地，获取城际交通信息
- 说明您的交通偏好（如"喜欢地铁"）
- 提供预算范围，AI 会生成合适的方案
- 可以多次对话调整行程

---

## ❓ 常见问题

### Q1: 语音识别不准确怎么办？
**A**: 
- 检查麦克风权限是否开启
- 在安静环境中使用
- 说话清晰，语速适中
- 可以手动修改识别结果

### Q2: 地图路线不显示？
**A**:
- 检查高德地图 API Key 是否配置
- 确保网络连接正常
- 刷新页面重试
- 查看浏览器控制台错误信息

### Q3: 城际交通信息不准确？
**A**:
- 城际交通信息仅供参考
- 实际购票请以官方平台为准
- 可以根据实际情况手动调整行程

### Q4: 预算提醒太频繁？
**A**:
- 预算提醒是为了帮助您控制支出
- 80% 提醒只显示一次消息
- 90% 和超支才会弹窗
- 可以根据提醒调整预算或支出

### Q5: 如何关闭某个功能？
**A**:
- 语音输入：不点击语音按钮即可
- 路线规划：可以不切换模式
- 预算提醒：无法关闭，这是重要的安全功能
- 城际交通：创建行程时不提供出发地

---

## 📞 获取帮助

如果您在使用过程中遇到问题：

1. 查看本文档的常见问题部分
2. 查看 `README.md` 了解基本使用方法
3. 查看 `docs/SETUP.md` 了解配置方法
4. 在 GitHub 提交 Issue

---

**文档版本**: v1.0  
**最后更新**: 2024-12-31  
**适用版本**: AI Web Planner v1.0.0

