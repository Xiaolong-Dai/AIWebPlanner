# AI Web Planner 测试指南

## 测试前准备

### 1. 启动开发服务器
```bash
cd frontend
npm run dev
```
访问: http://localhost:5173

### 2. 配置API密钥

在开始测试前,需要在设置页面配置以下API密钥:

#### 必需配置:
- **Supabase URL**: 你的Supabase项目URL
- **Supabase Anon Key**: Supabase匿名密钥
- **阿里云通义千问 API Key**: 用于AI功能

#### 可选配置:
- **高德地图 API Key**: 用于地图功能
- **科大讯飞 App ID/API Key**: 用于语音识别

### 3. 初始化数据库

在Supabase控制台执行 `docs/database_setup.sql` 中的SQL脚本。

---

## 功能测试清单

### ✅ 一、用户认证测试

#### 1.1 注册功能
- [ ] 打开应用,应该看到登录页面
- [ ] 点击"注册"标签
- [ ] 输入邮箱和密码(密码至少6位)
- [ ] 点击"注册"按钮
- [ ] 检查是否收到验证邮件
- [ ] 验证邮箱后是否能登录

**预期结果**: 
- 注册成功后显示成功提示
- 收到Supabase发送的验证邮件
- 验证后可以正常登录

#### 1.2 登录功能
- [ ] 输入已注册的邮箱和密码
- [ ] 点击"登录"按钮
- [ ] 检查是否跳转到Dashboard页面

**预期结果**: 
- 登录成功后跳转到Dashboard
- 顶部显示用户邮箱
- 左侧菜单正常显示

#### 1.3 登出功能
- [ ] 点击右上角用户头像
- [ ] 点击"退出登录"
- [ ] 检查是否返回登录页面

**预期结果**: 
- 成功退出并返回登录页
- 再次访问受保护页面会跳转到登录页

---

### ✅ 二、首次使用引导测试

#### 2.1 欢迎引导
- [ ] 首次登录后应该看到欢迎引导弹窗
- [ ] 点击"下一步"浏览所有步骤
- [ ] 检查每个步骤的内容是否正确显示
- [ ] 点击"前往设置页面配置"应该跳转到设置页

**预期结果**: 
- 引导弹窗正常显示
- 步骤切换流畅
- 链接跳转正确
- 关闭后不再显示(除非清除localStorage)

---

### ✅ 三、设置页面测试

#### 3.1 API密钥配置
- [ ] 进入设置页面
- [ ] 填写Supabase配置
- [ ] 填写LLM配置
- [ ] 填写地图配置(可选)
- [ ] 填写语音配置(可选)
- [ ] 点击"保存配置"

**预期结果**: 
- 配置保存成功提示
- 刷新页面后配置仍然存在

#### 3.2 API连接测试
- [ ] 点击"测试 Supabase 连接"
- [ ] 点击"测试 LLM 连接"
- [ ] 点击"测试地图服务"

**预期结果**: 
- 每个测试都应该显示成功或失败状态
- 成功时显示绿色图标和成功信息
- 失败时显示红色图标和错误信息

#### 3.3 清除配置
- [ ] 点击"清除所有配置"
- [ ] 确认清除

**预期结果**: 
- 所有配置被清空
- 表单重置为空

---

### ✅ 四、Dashboard页面测试

#### 4.1 统计数据显示
- [ ] 检查"总计划数"卡片
- [ ] 检查"进行中"卡片
- [ ] 检查"已完成"卡片
- [ ] 检查"总预算"卡片

**预期结果**: 
- 统计数据正确显示
- 数字与实际计划数量一致

#### 4.2 最近计划列表
- [ ] 查看最近的旅行计划列表
- [ ] 点击计划项查看详情
- [ ] 点击"查看全部"跳转到我的行程页

**预期结果**: 
- 显示最多5个最近的计划
- 点击可以跳转到详情页
- 状态标签颜色正确

#### 4.3 空状态
- [ ] 在没有计划时查看Dashboard
- [ ] 检查空状态提示
- [ ] 点击"创建第一个计划"按钮

**预期结果**: 
- 显示友好的空状态提示
- 提供创建计划和配置API的快捷按钮

---

### ✅ 五、创建计划测试

#### 5.1 AI对话创建
- [ ] 点击"创建计划"按钮
- [ ] 在聊天框输入旅行需求,例如:
  ```
  我想去日本东京,5天4晚,预算1万元,2个人,喜欢美食和动漫
  ```
- [ ] 点击发送或按Enter
- [ ] 等待AI生成行程

**预期结果**: 
- AI正确理解需求
- 生成详细的每日行程
- 包含景点、餐厅、住宿等信息
- 右侧地图显示行程点位

#### 5.2 语音输入(如已配置)
- [ ] 点击麦克风图标
- [ ] 说出旅行需求
- [ ] 检查语音转文字是否准确
- [ ] 发送并生成行程

**预期结果**: 
- 语音识别准确
- 转换为文字后可编辑
- 生成行程正常

#### 5.3 查看生成的行程
- [ ] 检查行程卡片显示
- [ ] 查看每日安排
- [ ] 查看地图上的标记点
- [ ] 点击地图标记查看详情

**预期结果**: 
- 行程按天分组显示
- 每个活动有时间、地点、描述
- 地图标记与行程对应
- 点击标记显示详细信息

#### 5.4 保存行程
- [ ] 点击"保存行程"按钮
- [ ] 输入计划名称
- [ ] 点击"确认保存"

**预期结果**: 
- 保存成功提示
- 跳转到"我的行程"页面
- 新计划出现在列表中

---

### ✅ 六、我的行程测试

#### 6.1 计划列表显示
- [ ] 查看所有计划列表
- [ ] 检查表格列是否完整(名称、目的地、日期、预算、人数、状态)
- [ ] 检查状态标签颜色

**预期结果**: 
- 所有计划正确显示
- 数据完整准确
- 状态标签颜色正确

#### 6.2 标签页筛选
- [ ] 点击"全部"标签
- [ ] 点击"草稿"标签
- [ ] 点击"已确认"标签
- [ ] 点击"已完成"标签
- [ ] 点击"已归档"标签

**预期结果**: 
- 每个标签显示对应状态的计划
- 切换流畅无延迟

#### 6.3 计划操作
- [ ] 点击"查看"按钮
- [ ] 点击"编辑"按钮
- [ ] 点击"删除"按钮并确认

**预期结果**: 
- 查看跳转到详情页
- 编辑跳转到编辑页
- 删除后计划从列表消失

---

### ✅ 七、计划详情测试

#### 7.1 基本信息显示
- [ ] 查看计划名称和状态
- [ ] 查看目的地、日期、人数、预算
- [ ] 查看偏好标签

**预期结果**: 
- 所有信息正确显示
- 格式美观易读

#### 7.2 预算统计
- [ ] 查看总预算、已花费、剩余预算
- [ ] 查看预算使用率进度条

**预期结果**: 
- 统计数据准确
- 进度条颜色根据使用率变化

#### 7.3 标签页切换
- [ ] 切换到"详细行程"标签
- [ ] 切换到"地图视图"标签
- [ ] 切换到"费用记录"标签
- [ ] 切换到"行程时间轴"标签

**预期结果**: 
- 每个标签内容正确显示
- 切换流畅无卡顿

#### 7.4 编辑按钮
- [ ] 点击"编辑计划"按钮

**预期结果**: 
- 跳转到编辑页面
- 表单预填充当前数据

---

### ✅ 八、计划编辑测试

#### 8.1 表单预填充
- [ ] 检查所有字段是否预填充当前值
- [ ] 检查日期范围选择器
- [ ] 检查偏好多选框

**预期结果**: 
- 所有字段正确显示当前值
- 可以正常编辑

#### 8.2 修改并保存
- [ ] 修改计划名称
- [ ] 修改预算
- [ ] 修改状态
- [ ] 点击"保存修改"

**预期结果**: 
- 保存成功提示
- 返回详情页
- 修改已生效

#### 8.3 取消编辑
- [ ] 修改一些字段
- [ ] 点击"取消"按钮

**预期结果**: 
- 返回详情页
- 修改未保存

---

### ✅ 九、预算管理测试

#### 9.1 选择计划
- [ ] 打开预算管理页面
- [ ] 从下拉框选择一个计划

**预期结果**: 
- 显示该计划的预算统计
- 加载该计划的费用记录

#### 9.2 预算概览
- [ ] 查看总预算、已花费、剩余、使用率

**预期结果**: 
- 数据准确
- 使用率进度条颜色正确

#### 9.3 添加费用
- [ ] 点击"添加费用"
- [ ] 选择类别(交通/住宿/餐饮/景点/购物/其他)
- [ ] 输入金额
- [ ] 输入描述
- [ ] 选择日期
- [ ] 输入备注(可选)
- [ ] 点击"添加"

**预期结果**: 
- 费用添加成功
- 列表中显示新费用
- 统计数据更新
- 图表更新

#### 9.4 费用统计图表
- [ ] 查看费用分类饼图
- [ ] 查看每日费用柱状图

**预期结果**: 
- 饼图显示各类别占比
- 柱状图显示每日费用趋势
- 图表数据准确

#### 9.5 AI预算分析
- [ ] 点击"AI预算分析"按钮
- [ ] 等待分析结果
- [ ] 查看预算分配建议
- [ ] 查看预算警告
- [ ] 查看优化建议

**预期结果**: 
- AI分析结果合理
- 提供有价值的建议
- 警告准确

#### 9.6 删除费用
- [ ] 点击费用记录的"删除"按钮
- [ ] 确认删除

**预期结果**: 
- 费用被删除
- 统计数据更新
- 图表更新

---

## 性能测试

### 1. 页面加载速度
- [ ] 首次加载时间 < 3秒
- [ ] 页面切换流畅
- [ ] 图表渲染流畅

### 2. AI响应速度
- [ ] AI生成行程 < 10秒
- [ ] AI预算分析 < 5秒

### 3. 地图渲染
- [ ] 地图加载流畅
- [ ] 标记点显示正确
- [ ] 缩放和拖动流畅

---

## 兼容性测试

### 浏览器兼容性
- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)

### 响应式设计
- [ ] 桌面端 (1920x1080)
- [ ] 笔记本 (1366x768)
- [ ] 平板 (768x1024)
- [ ] 手机 (375x667)

---

## 错误处理测试

### 1. 网络错误
- [ ] 断网情况下的提示
- [ ] API调用失败的提示
- [ ] 超时处理

### 2. 数据验证
- [ ] 表单验证提示
- [ ] 必填字段检查
- [ ] 数据格式验证

### 3. 边界情况
- [ ] 空数据状态
- [ ] 大量数据加载
- [ ] 特殊字符输入

---

## 已知问题

### 待修复
- 无

### 待优化
- 添加更多加载骨架屏
- 优化大数据量下的性能
- 添加离线缓存功能

---

## 测试报告模板

```
测试日期: ____________________
测试人员: ____________________
测试环境: ____________________

通过项: _____ / _____
失败项: _____
阻塞问题: _____

详细问题:
1. 
2. 
3. 

建议:
1. 
2. 
3. 
```

