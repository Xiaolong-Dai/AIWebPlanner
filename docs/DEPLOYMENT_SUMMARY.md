# ğŸš€ éƒ¨ç½²æ–¹æ¡ˆæ€»ç»“

## ğŸ“‹ éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Docker Compose ç¯å¢ƒ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    Frontend     â”‚         â”‚    Backend      â”‚  â”‚
â”‚  â”‚  (React + Nginx)â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚   (Node.js)     â”‚  â”‚
â”‚  â”‚   Port: 3000    â”‚  Proxy  â”‚   Port: 3001    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                            â”‚             â”‚
â”‚         â”‚                            â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                      â”‚                             â”‚
â”‚            ai-planner-network                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              ç”¨æˆ·è®¿é—® localhost:3000
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                             â”‚
        â–¼                             â–¼
   Supabase                    é˜¿é‡Œäº‘ç™¾ç‚¼
  (æ•°æ®åº“/è®¤è¯)                  (AIæœåŠ¡)
```

---

## ğŸ¯ éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | Dockeréƒ¨ç½² | æœ¬åœ°å¼€å‘ | Verceléƒ¨ç½² |
|------|-----------|---------|-----------|
| **éš¾åº¦** | â­ ç®€å• | â­â­ ä¸­ç­‰ | â­â­â­ å¤æ‚ |
| **é€Ÿåº¦** | ğŸš€ 5åˆ†é’Ÿ | â±ï¸ 10åˆ†é’Ÿ | â±ï¸ 15åˆ†é’Ÿ |
| **ç¯å¢ƒéš”ç¦»** | âœ… å®Œå…¨éš”ç¦» | âŒ ä¾èµ–æœ¬åœ° | âœ… äº‘ç«¯éš”ç¦» |
| **ç”Ÿäº§å°±ç»ª** | âœ… æ˜¯ | âŒ å¦ | âœ… æ˜¯ |
| **æˆæœ¬** | ğŸ’° å…è´¹ | ğŸ’° å…è´¹ | ğŸ’° å…è´¹ |
| **æ¨èåœºæ™¯** | ç”Ÿäº§éƒ¨ç½² | å¼€å‘è°ƒè¯• | åœ¨çº¿æ¼”ç¤º |

---

## âœ… æ¨èæ–¹æ¡ˆ: Dockeréƒ¨ç½²

### ä¸ºä»€ä¹ˆé€‰æ‹©Dockerï¼Ÿ

1. âœ… **ä¸€é”®éƒ¨ç½²** - è¿è¡Œä¸€ä¸ªè„šæœ¬å³å¯
2. âœ… **ç¯å¢ƒä¸€è‡´** - å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´
3. âœ… **æ˜“äºç»´æŠ¤** - ç»Ÿä¸€çš„å®¹å™¨ç®¡ç†
4. âœ… **å¿«é€Ÿå›æ»š** - å‡ºé—®é¢˜å¯ä»¥å¿«é€Ÿå›é€€
5. âœ… **èµ„æºéš”ç¦»** - ä¸å½±å“å®¿ä¸»æœºç¯å¢ƒ
6. âœ… **ç¬¦åˆè§„èŒƒ** - é¡¹ç›®è¦æ±‚ä½¿ç”¨Docker

---

## ğŸš€ Dockerå¿«é€Ÿéƒ¨ç½²ï¼ˆ5åˆ†é’Ÿï¼‰

### ç¬¬ä¸€æ­¥: å®‰è£…Docker

**Windows/Mac:**
- ä¸‹è½½å¹¶å®‰è£… Docker Desktop: https://www.docker.com/products/docker-desktop

**Linux:**
```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo systemctl start docker
```

### ç¬¬äºŒæ­¥: è¿è¡Œéƒ¨ç½²è„šæœ¬

**Windows:**
```bash
docker-deploy.bat
```

**Linux/Mac:**
```bash
chmod +x docker-deploy.sh
./docker-deploy.sh
```

### ç¬¬ä¸‰æ­¥: è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨: **http://localhost:3000**

### ç¬¬å››æ­¥: é…ç½®æœåŠ¡

1. è¿›å…¥ **è®¾ç½®é¡µé¢**
2. é…ç½®API Key
3. æµ‹è¯•æœåŠ¡
4. å¼€å§‹ä½¿ç”¨

---

## ğŸ“¦ éƒ¨ç½²æ–‡ä»¶æ¸…å•

### Dockerç›¸å…³æ–‡ä»¶

```
AI Web Planner/
â”œâ”€â”€ docker-compose.yml          # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ .dockerignore               # Dockerå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ docker-deploy.bat           # Windowséƒ¨ç½²è„šæœ¬
â”œâ”€â”€ docker-deploy.sh            # Linux/Macéƒ¨ç½²è„šæœ¬
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ Dockerfile              # å‰ç«¯é•œåƒæ„å»º
â”‚   â””â”€â”€ nginx.conf              # Nginxé…ç½®ï¼ˆå«APIä»£ç†ï¼‰
â”‚
â””â”€â”€ backend/
    â”œâ”€â”€ Dockerfile              # åç«¯é•œåƒæ„å»º
    â”œâ”€â”€ package.json            # åç«¯ä¾èµ–
    â””â”€â”€ server.js               # åç«¯ä»£ç†æœåŠ¡
```

### æ–‡æ¡£æ–‡ä»¶

```
docs/
â”œâ”€â”€ DOCKER_DEPLOYMENT.md        # Dockeréƒ¨ç½²è¯¦ç»†æŒ‡å—
â”œâ”€â”€ DEPLOYMENT_SUMMARY.md       # æœ¬æ–‡æ¡£
â”œâ”€â”€ ALIYUN_BAILIAN_SETUP.md     # é˜¿é‡Œäº‘ç™¾ç‚¼é…ç½®
â”œâ”€â”€ QUICK_START_FIX.md          # å¿«é€Ÿä¿®å¤æŒ‡å—
â””â”€â”€ database_setup.sql          # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
```

---

## ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯´æ˜

### 1. Frontendå®¹å™¨

**åŸºç¡€é•œåƒ**: `nginx:alpine`

**åŠŸèƒ½**:
- æä¾›Reactåº”ç”¨é™æ€æ–‡ä»¶
- åå‘ä»£ç†APIè¯·æ±‚åˆ°åç«¯
- Gzipå‹ç¼©
- é™æ€èµ„æºç¼“å­˜

**é…ç½®æ–‡ä»¶**: `frontend/nginx.conf`

**å…³é”®é…ç½®**:
```nginx
# APIä»£ç† - è½¬å‘åˆ°åç«¯æœåŠ¡
location /api/ {
    proxy_pass http://backend:3001;
    # ... å…¶ä»–ä»£ç†é…ç½®
}
```

### 2. Backendå®¹å™¨

**åŸºç¡€é•œåƒ**: `node:18-alpine`

**åŠŸèƒ½**:
- ä»£ç†é˜¿é‡Œäº‘ç™¾ç‚¼API
- è§£å†³CORSè·¨åŸŸé—®é¢˜
- æä¾›å¥åº·æ£€æŸ¥ç«¯ç‚¹

**å…¥å£æ–‡ä»¶**: `backend/server.js`

**ç«¯ç‚¹**:
- `GET /health` - å¥åº·æ£€æŸ¥
- `POST /api/llm-proxy` - AIæœåŠ¡ä»£ç†

### 3. Dockerç½‘ç»œ

**ç½‘ç»œåç§°**: `ai-planner-network`

**ç±»å‹**: bridge

**ä½œç”¨**: å®¹å™¨é—´é€šä¿¡

---

## ğŸ¯ éƒ¨ç½²æµç¨‹è¯¦è§£

### æ„å»ºé˜¶æ®µ

```bash
docker-compose build
```

**Frontendæ„å»º**:
1. å®‰è£…Node.jsä¾èµ–
2. è¿è¡Œ `npm run build`
3. å°†æ„å»ºäº§ç‰©å¤åˆ¶åˆ°Nginx
4. é…ç½®Nginxåå‘ä»£ç†

**Backendæ„å»º**:
1. å®‰è£…Node.jsä¾èµ–
2. å¤åˆ¶æœåŠ¡å™¨ä»£ç 
3. æš´éœ²3001ç«¯å£

### å¯åŠ¨é˜¶æ®µ

```bash
docker-compose up -d
```

**å¯åŠ¨é¡ºåº**:
1. åˆ›å»ºç½‘ç»œ `ai-planner-network`
2. å¯åŠ¨Backendå®¹å™¨
3. ç­‰å¾…Backendå¥åº·æ£€æŸ¥é€šè¿‡
4. å¯åŠ¨Frontendå®¹å™¨
5. ç­‰å¾…Frontendå¥åº·æ£€æŸ¥é€šè¿‡

### å¥åº·æ£€æŸ¥

**Backend**:
```bash
curl http://localhost:3001/health
# è¿”å›: {"status":"ok","message":"ä»£ç†æœåŠ¡å™¨è¿è¡Œæ­£å¸¸"}
```

**Frontend**:
```bash
curl http://localhost:3000
# è¿”å›: HTMLå†…å®¹
```

---

## ğŸ“Š èµ„æºä½¿ç”¨

### é•œåƒå¤§å°

- **Frontend**: ~50MB (nginx:alpine + é™æ€æ–‡ä»¶)
- **Backend**: ~150MB (node:18-alpine + ä¾èµ–)
- **æ€»è®¡**: ~200MB

### è¿è¡Œæ—¶èµ„æº

- **CPU**: < 5% (ç©ºé—²æ—¶)
- **å†…å­˜**: 
  - Frontend: ~10MB
  - Backend: ~50MB
  - æ€»è®¡: ~60MB

### ç£ç›˜ç©ºé—´

- é•œåƒ: ~200MB
- å®¹å™¨: ~10MB
- æ—¥å¿—: ~100MB (å¯é…ç½®)
- **æ€»è®¡**: ~310MB

---

## ğŸ› ï¸ å¸¸ç”¨æ“ä½œ

### å¯åŠ¨å’Œåœæ­¢

```bash
# å¯åŠ¨
docker-compose up -d

# åœæ­¢
docker-compose down

# é‡å¯
docker-compose restart
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# æ‰€æœ‰æ—¥å¿—
docker-compose logs -f

# å‰ç«¯æ—¥å¿—
docker-compose logs -f frontend

# åç«¯æ—¥å¿—
docker-compose logs -f backend
```

### æ›´æ–°åº”ç”¨

```bash
# 1. åœæ­¢æœåŠ¡
docker-compose down

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull

# 3. é‡æ–°æ„å»º
docker-compose build

# 4. å¯åŠ¨æœåŠ¡
docker-compose up -d
```

### æ¸…ç†èµ„æº

```bash
# åœæ­¢å¹¶åˆ é™¤å®¹å™¨
docker-compose down

# åˆ é™¤é•œåƒ
docker rmi ai-web-planner_frontend ai-web-planner_backend

# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨èµ„æº
docker system prune -a
```

---

## ğŸš¢ ç”Ÿäº§éƒ¨ç½²å»ºè®®

### 1. ä½¿ç”¨é•œåƒä»“åº“

```bash
# æ„å»ºé•œåƒ
docker-compose build

# æ ‡è®°é•œåƒ
docker tag ai-web-planner_frontend:latest registry.cn-beijing.aliyuncs.com/your-namespace/ai-web-planner-frontend:v1.0

# æ¨é€é•œåƒ
docker push registry.cn-beijing.aliyuncs.com/your-namespace/ai-web-planner-frontend:v1.0
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶:
```bash
VITE_SUPABASE_URL=ä½ çš„URL
VITE_SUPABASE_ANON_KEY=ä½ çš„Key
```

### 3. é…ç½®æ—¥å¿—

åœ¨ `docker-compose.yml` ä¸­æ·»åŠ :
```yaml
logging:
  driver: "json-file"
  options:
    max-size: "10m"
    max-file: "3"
```

### 4. é…ç½®é‡å¯ç­–ç•¥

```yaml
restart: unless-stopped
```

### 5. ä½¿ç”¨å¥åº·æ£€æŸ¥

å·²åœ¨ `docker-compose.yml` ä¸­é…ç½®ã€‚

---

## â“ å¸¸è§é—®é¢˜

### Q1: ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**: ä¿®æ”¹ `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„
```yaml
ports:
  - "8080:80"  # æ”¹ç”¨8080ç«¯å£
```

### Q2: æ„å»ºå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**: é…ç½®Dockeré•œåƒåŠ é€Ÿ
```json
{
  "registry-mirrors": [
    "https://mirror.ccs.tencentyun.com"
  ]
}
```

### Q3: å®¹å™¨æ— æ³•å¯åŠ¨

**æ£€æŸ¥æ—¥å¿—**:
```bash
docker-compose logs backend
docker-compose logs frontend
```

### Q4: å‰ç«¯æ— æ³•è¿æ¥åç«¯

**æ£€æŸ¥ç½‘ç»œ**:
```bash
docker-compose exec frontend ping backend
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Dockeréƒ¨ç½²è¯¦ç»†æŒ‡å—](DOCKER_DEPLOYMENT.md)
- [é˜¿é‡Œäº‘ç™¾ç‚¼é…ç½®](ALIYUN_BAILIAN_SETUP.md)
- [å¿«é€Ÿä¿®å¤æŒ‡å—](QUICK_START_FIX.md)
- [æ•°æ®åº“åˆå§‹åŒ–](database_setup.sql)

---

## ğŸ‰ æ€»ç»“

### éƒ¨ç½²ä¼˜åŠ¿

1. âœ… **ç®€å•å¿«é€Ÿ** - 5åˆ†é’Ÿå®Œæˆéƒ¨ç½²
2. âœ… **ç¯å¢ƒä¸€è‡´** - æ¶ˆé™¤"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘"é—®é¢˜
3. âœ… **æ˜“äºç»´æŠ¤** - ç»Ÿä¸€çš„å®¹å™¨ç®¡ç†
4. âœ… **ç”Ÿäº§å°±ç»ª** - å¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒ
5. âœ… **ç¬¦åˆè§„èŒƒ** - æ»¡è¶³é¡¹ç›®è¦æ±‚

### ä¸‹ä¸€æ­¥

1. è¿è¡Œéƒ¨ç½²è„šæœ¬
2. è®¿é—®åº”ç”¨
3. é…ç½®APIæœåŠ¡
4. å¼€å§‹ä½¿ç”¨

---

**éƒ¨ç½²æ„‰å¿«ï¼** ğŸš€

