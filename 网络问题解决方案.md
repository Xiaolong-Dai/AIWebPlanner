# ğŸ”§ Docker ç½‘ç»œé—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸ› é—®é¢˜è¯Šæ–­

ä½ é‡åˆ°çš„é”™è¯¯æ˜¯:
```
failed to fetch oauth token: Post "https://auth.docker.io/token": 
dial tcp 157.240.7.8:443: connectex: A connection attempt failed 
because the connected party did not properly respond after a period 
of time, or established connection failed because connected host has 
failed to respond.
```

**é—®é¢˜åŸå› **: Docker æ— æ³•è¿æ¥åˆ° Docker Hub ä¸‹è½½é•œåƒ

**å¯èƒ½çš„åŸå› **:
1. ç½‘ç»œè¿æ¥é—®é¢˜
2. é˜²ç«å¢™é˜»æ­¢
3. DNS è§£æé—®é¢˜
4. Docker Hub åœ¨æŸäº›åœ°åŒºè®¿é—®å—é™

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€: é…ç½® Docker é•œåƒåŠ é€Ÿå™¨ (æ¨è)

ä½¿ç”¨å›½å†…çš„ Docker é•œåƒæºå¯ä»¥è§£å†³è®¿é—®é—®é¢˜ã€‚

#### 1. æ‰“å¼€ Docker Desktop è®¾ç½®

1. å³é”®ç‚¹å‡»ç³»ç»Ÿæ‰˜ç›˜çš„ Docker å›¾æ ‡
2. é€‰æ‹© "Settings" (è®¾ç½®)
3. é€‰æ‹© "Docker Engine"

#### 2. æ·»åŠ é•œåƒåŠ é€Ÿå™¨é…ç½®

åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹:

```json
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://docker.1panel.live",
    "https://hub.rat.dev"
  ],
  "builder": {
    "gc": {
      "defaultKeepStorage": "20GB",
      "enabled": true
    }
  },
  "experimental": false
}
```

**æ³¨æ„**: 
- å¦‚æœé…ç½®æ–‡ä»¶ä¸­å·²æœ‰å…¶ä»–å†…å®¹,åªéœ€æ·»åŠ  `"registry-mirrors"` éƒ¨åˆ†
- ä¿æŒ JSON æ ¼å¼æ­£ç¡® (æ³¨æ„é€—å·)

#### 3. åº”ç”¨å¹¶é‡å¯

1. ç‚¹å‡» "Apply & Restart" æŒ‰é’®
2. ç­‰å¾… Docker Desktop é‡å¯å®Œæˆ (çº¦ 30-60 ç§’)

#### 4. éªŒè¯é…ç½®

```powershell
docker info | Select-String "Registry Mirrors"
```

åº”è¯¥èƒ½çœ‹åˆ°é…ç½®çš„é•œåƒåœ°å€ã€‚

---

### æ–¹æ¡ˆäºŒ: ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨

å¦‚æœä½ æœ‰é˜¿é‡Œäº‘è´¦å·,å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘çš„ä¸“å±é•œåƒåŠ é€Ÿå™¨:

#### 1. è·å–åŠ é€Ÿå™¨åœ°å€

1. è®¿é—®: https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors
2. ç™»å½•é˜¿é‡Œäº‘è´¦å·
3. å¤åˆ¶ä½ çš„ä¸“å±åŠ é€Ÿå™¨åœ°å€ (æ ¼å¼: `https://xxxxxx.mirror.aliyuncs.com`)

#### 2. é…ç½® Docker

åœ¨ Docker Desktop è®¾ç½®ä¸­æ·»åŠ :

```json
{
  "registry-mirrors": [
    "https://xxxxxx.mirror.aliyuncs.com"
  ]
}
```

æ›¿æ¢ `xxxxxx` ä¸ºä½ çš„å®é™…åŠ é€Ÿå™¨åœ°å€ã€‚

---

### æ–¹æ¡ˆä¸‰: æ£€æŸ¥ç½‘ç»œå’Œé˜²ç«å¢™

#### 1. æ£€æŸ¥ç½‘ç»œè¿æ¥

```powershell
# æµ‹è¯•èƒ½å¦è®¿é—® Docker Hub
Test-NetConnection -ComputerName hub.docker.com -Port 443

# æµ‹è¯• DNS è§£æ
nslookup hub.docker.com
```

#### 2. æ£€æŸ¥é˜²ç«å¢™

1. æ‰“å¼€ Windows é˜²ç«å¢™è®¾ç½®
2. ç¡®ä¿ Docker Desktop è¢«å…è®¸é€šè¿‡é˜²ç«å¢™
3. å¦‚æœä½¿ç”¨ä¼ä¸šç½‘ç»œ,è”ç³»ç½‘ç»œç®¡ç†å‘˜

#### 3. æ£€æŸ¥ä»£ç†è®¾ç½®

å¦‚æœä½ ä½¿ç”¨ä»£ç†ä¸Šç½‘:

1. æ‰“å¼€ Docker Desktop è®¾ç½®
2. é€‰æ‹© "Resources" â†’ "Proxies"
3. é…ç½®ä»£ç†æœåŠ¡å™¨åœ°å€

---

### æ–¹æ¡ˆå››: æ‰‹åŠ¨ä¸‹è½½é•œåƒ (ä¸´æ—¶æ–¹æ¡ˆ)

å¦‚æœä»¥ä¸Šæ–¹æ¡ˆéƒ½ä¸è¡Œ,å¯ä»¥å°è¯•æ‰‹åŠ¨æ‹‰å–é•œåƒ:

```powershell
# æ‹‰å– Node.js é•œåƒ
docker pull node:18-alpine

# æ‹‰å– Nginx é•œåƒ
docker pull nginx:alpine
```

å¦‚æœæ‰‹åŠ¨æ‹‰å–ä¹Ÿå¤±è´¥,è¯´æ˜ç½‘ç»œé—®é¢˜æ¯”è¾ƒä¸¥é‡,éœ€è¦é…ç½®é•œåƒåŠ é€Ÿå™¨ã€‚

---

## ğŸš€ é…ç½®å®Œæˆåé‡æ–°éƒ¨ç½²

### 1. é‡å¯ Docker Desktop

ç¡®ä¿é…ç½®ç”Ÿæ•ˆã€‚

### 2. æ¸…ç†ç¼“å­˜ (å¯é€‰)

```powershell
# æ¸…ç†æ„å»ºç¼“å­˜
docker builder prune -a

# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### 3. é‡æ–°è¿è¡Œéƒ¨ç½²è„šæœ¬

```powershell
.\docker-deploy.ps1
```

---

## ğŸ“‹ æ¨èçš„é•œåƒåŠ é€Ÿå™¨åˆ—è¡¨

### å›½å†…å…¬å…±é•œåƒæº

| é•œåƒæº | åœ°å€ | è¯´æ˜ |
|--------|------|------|
| DaoCloud | https://docker.m.daocloud.io | ç¨³å®šå¯é  |
| 1Panel | https://docker.1panel.live | é€Ÿåº¦å¿« |
| Rat Dev | https://hub.rat.dev | å¤‡ç”¨ |

### äº‘æœåŠ¡å•†é•œåƒæº

| æœåŠ¡å•† | åœ°å€æ ¼å¼ | è·å–æ–¹å¼ |
|--------|---------|---------|
| é˜¿é‡Œäº‘ | https://xxxxxx.mirror.aliyuncs.com | éœ€è¦ç™»å½•è·å– |
| è…¾è®¯äº‘ | https://mirror.ccs.tencentyun.com | å…¬å¼€å¯ç”¨ |
| ç½‘æ˜“äº‘ | https://hub-mirror.c.163.com | å…¬å¼€å¯ç”¨ |

---

## ğŸ” éªŒè¯é•œåƒåŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ

### 1. æŸ¥çœ‹ Docker é…ç½®

```powershell
docker info
```

åœ¨è¾“å‡ºä¸­æŸ¥æ‰¾ "Registry Mirrors" éƒ¨åˆ†,åº”è¯¥èƒ½çœ‹åˆ°é…ç½®çš„é•œåƒåœ°å€ã€‚

### 2. æµ‹è¯•æ‹‰å–é•œåƒ

```powershell
# æ‹‰å–ä¸€ä¸ªå°é•œåƒæµ‹è¯•
docker pull hello-world

# æŸ¥çœ‹æ‹‰å–é€Ÿåº¦
docker pull node:18-alpine
```

å¦‚æœé€Ÿåº¦æ˜æ˜¾æå‡,è¯´æ˜é•œåƒåŠ é€Ÿå™¨é…ç½®æˆåŠŸã€‚

---

## â“ å¸¸è§é—®é¢˜

### Q1: é…ç½®é•œåƒåŠ é€Ÿå™¨åè¿˜æ˜¯å¾ˆæ…¢?

**A**: 
1. å°è¯•æ›´æ¢å…¶ä»–é•œåƒæº
2. æ£€æŸ¥ç½‘ç»œè¿æ¥è´¨é‡
3. å°è¯•åœ¨ç½‘ç»œè¾ƒå¥½çš„æ—¶æ®µæ„å»º

### Q2: Docker Desktop é‡å¯åé…ç½®ä¸¢å¤±?

**A**: 
1. ç¡®ä¿ç‚¹å‡»äº† "Apply & Restart"
2. æ£€æŸ¥ JSON æ ¼å¼æ˜¯å¦æ­£ç¡®
3. ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ Docker Desktop

### Q3: æ‰€æœ‰é•œåƒæºéƒ½æ— æ³•è®¿é—®?

**A**: 
1. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
2. æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†ä»£ç†
3. è”ç³»ç½‘ç»œç®¡ç†å‘˜ (å¦‚æœåœ¨ä¼ä¸šç½‘ç»œ)

---

## ğŸ“ å®Œæ•´çš„ Docker Engine é…ç½®ç¤ºä¾‹

```json
{
  "builder": {
    "gc": {
      "defaultKeepStorage": "20GB",
      "enabled": true
    }
  },
  "experimental": false,
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://docker.1panel.live",
    "https://hub.rat.dev"
  ],
  "dns": [
    "8.8.8.8",
    "114.114.114.114"
  ],
  "insecure-registries": [],
  "debug": false,
  "log-level": "info"
}
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… é…ç½®é•œåƒåŠ é€Ÿå™¨
2. âœ… é‡å¯ Docker Desktop
3. âœ… éªŒè¯é…ç½®ç”Ÿæ•ˆ
4. âœ… è¿è¡Œ `.\docker-deploy.ps1`
5. âœ… ç­‰å¾…æ„å»ºå®Œæˆ

---

## ğŸ“ éœ€è¦å¸®åŠ©?

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨:

1. æ£€æŸ¥ Docker Desktop æ—¥å¿—
2. æŸ¥çœ‹ç³»ç»Ÿäº‹ä»¶æŸ¥çœ‹å™¨
3. å°è¯•é‡æ–°å®‰è£… Docker Desktop
4. æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

---

**æ›´æ–°æ—¶é—´**: 2025-10-29  
**é—®é¢˜**: Docker æ— æ³•è¿æ¥åˆ° Docker Hub  
**è§£å†³æ–¹æ¡ˆ**: é…ç½®é•œåƒåŠ é€Ÿå™¨  
**çŠ¶æ€**: âœ… å¯è§£å†³

