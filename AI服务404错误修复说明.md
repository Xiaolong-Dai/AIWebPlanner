# AI æœåŠ¡ 404 é”™è¯¯ä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

ç”¨æˆ·åœ¨æµ‹è¯• AI å¯¹è¯åŠŸèƒ½æ—¶é‡åˆ°é”™è¯¯:

```
æŠ±æ­‰,AIæœåŠ¡æš‚æ—¶æ— æ³•å“åº”ã€‚
è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ AI æœåŠ¡é…ç½®
è¯·æ£€æŸ¥é…ç½®åé‡è¯•ã€‚
æµ‹è¯•å†…å®¹:AI å¯¹è¯åŠŸèƒ½
æµ‹è¯•å¤±è´¥
AI æœåŠ¡è°ƒç”¨å¤±è´¥: Request failed with status code 404
```

---

## ğŸ” é—®é¢˜åˆ†æ

### 1. åç«¯æ—¥å¿—æ˜¾ç¤º

```
[2025-10-29T13:42:28.133Z] ä»£ç†è¯·æ±‚åˆ°é˜¿é‡Œäº‘ç™¾ç‚¼: https://bailian.aliyun.com/v1/api/completions
[2025-10-29T13:42:28.553Z] é˜¿é‡Œäº‘APIé”™è¯¯: { status: 404, statusText: 'Not Found', error: {} }
```

### 2. æ ¹æœ¬åŸå› 

**ç”¨æˆ·é…ç½®çš„ API Endpoint ä¸æ­£ç¡®**:
- âŒ é”™è¯¯: `https://bailian.aliyun.com/v1/api/completions`
- âœ… æ­£ç¡®: `https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation`

**è¯´æ˜**:
- `bailian.aliyun.com` æ˜¯**æ§åˆ¶å°ç½‘å€**,ä¸æ˜¯ API endpoint
- å®é™…çš„ API æœåŠ¡åœ¨ `dashscope.aliyuncs.com` åŸŸåä¸‹
- è¿™æ˜¯é˜¿é‡Œäº‘ DashScope API çš„æ ‡å‡†åœ°å€

---

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹ 1: ä¼˜åŒ–è®¾ç½®é¡µé¢æç¤º

**æ–‡ä»¶**: `frontend/src/pages/Settings.tsx`

**ä¿®æ”¹å†…å®¹**:

1. **API Key å­—æ®µ**:
   - æ·»åŠ  tooltip: "åœ¨é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°è·å– API Key"
   - ä¿®æ”¹ placeholder: `sk-xxxxxxxxxxxxxxxx`

2. **API Endpoint å­—æ®µ**:
   - æ·»åŠ  tooltip: "ä½¿ç”¨ DashScope API endpoint"
   - æ·»åŠ è¯¦ç»†è¯´æ˜ (extra):
     ```
     âœ… æ­£ç¡®ç¤ºä¾‹: https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation
     ğŸ’¡ è·å–æ–¹å¼: [æŸ¥çœ‹æ–‡æ¡£]
     ```

**ä»£ç å˜æ›´**:

```typescript
// ä¿®æ”¹å‰
<Form.Item
  label="API Key"
  name="llm_api_key"
  rules={[{ required: true, message: 'è¯·è¾“å…¥ LLM API Key' }]}
>
  <Input.Password placeholder="your-llm-api-key" prefix={<KeyOutlined />} size="large" />
</Form.Item>

<Form.Item
  label="API Endpoint"
  name="llm_endpoint"
  rules={[{ required: true, message: 'è¯·è¾“å…¥ API Endpoint' }]}
>
  <Input
    placeholder="https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation"
    prefix={<KeyOutlined />}
    size="large"
  />
</Form.Item>

// ä¿®æ”¹å
<Form.Item
  label="API Key"
  name="llm_api_key"
  rules={[{ required: true, message: 'è¯·è¾“å…¥ LLM API Key' }]}
  tooltip="åœ¨é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°è·å– API Key"
>
  <Input.Password placeholder="sk-xxxxxxxxxxxxxxxx" prefix={<KeyOutlined />} size="large" />
</Form.Item>

<Form.Item
  label="API Endpoint"
  name="llm_endpoint"
  rules={[{ required: true, message: 'è¯·è¾“å…¥ API Endpoint' }]}
  tooltip="ä½¿ç”¨ DashScope API endpoint"
  extra={
    <div style={{ marginTop: 8, color: '#666', fontSize: 12 }}>
      <div>âœ… æ­£ç¡®ç¤ºä¾‹: https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation</div>
      <div style={{ marginTop: 4 }}>
        ğŸ’¡ è·å–æ–¹å¼: 
        <a href="https://help.aliyun.com/zh/model-studio/getting-started/first-api-call-to-qwen" target="_blank" rel="noopener noreferrer" style={{ marginLeft: 4 }}>
          æŸ¥çœ‹æ–‡æ¡£
        </a>
      </div>
    </div>
  }
>
  <Input
    placeholder="https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation"
    prefix={<KeyOutlined />}
    size="large"
  />
</Form.Item>
```

### ä¿®æ”¹ 2: åˆ›å»ºé…ç½®æŒ‡å—æ–‡æ¡£

**æ–‡ä»¶**: `é˜¿é‡Œäº‘ç™¾ç‚¼APIé…ç½®æŒ‡å—.md`

**å†…å®¹åŒ…æ‹¬**:
1. é—®é¢˜è¯´æ˜
2. æ­£ç¡®çš„é…ç½®æ–¹å¼
3. è·å– API Key å’Œ Endpoint çš„è¯¦ç»†æ­¥éª¤
4. åœ¨åº”ç”¨ä¸­é…ç½®çš„æ–¹æ³•
5. å¸¸è§é—®é¢˜è§£ç­”
6. éªŒè¯é…ç½®çš„æ–¹æ³•

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. åˆ·æ–°æµè§ˆå™¨

è®¿é—® http://localhost:3000 å¹¶åˆ·æ–°é¡µé¢

### 2. æ‰“å¼€è®¾ç½®é¡µé¢

ç‚¹å‡»å³ä¸Šè§’çš„ **è®¾ç½®å›¾æ ‡** âš™ï¸

### 3. ä¿®æ”¹ API Endpoint

å°† Endpoint æ”¹ä¸º:
```
https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation
```

### 4. ç¡®è®¤ API Key

ç¡®ä¿ API Key æ ¼å¼æ­£ç¡®:
```
sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 5. ä¿å­˜é…ç½®

ç‚¹å‡» **"ä¿å­˜é…ç½®"** æŒ‰é’®

### 6. æµ‹è¯•

ç‚¹å‡» **"æµ‹è¯• AI å¯¹è¯"** æŒ‰é’®

**é¢„æœŸç»“æœ**:
```
âœ… æµ‹è¯•æˆåŠŸ
AI æœåŠ¡é…ç½®æ­£ç¡®
```

---

## ğŸ“ æ­£ç¡®çš„é…ç½®ç¤ºä¾‹

```json
{
  "llm_api_key": "sk-abc123def456ghi789jkl",
  "llm_endpoint": "https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation"
}
```

---

## âŒ å¸¸è§é”™è¯¯é…ç½®

### é”™è¯¯ 1: ä½¿ç”¨æ§åˆ¶å°åœ°å€

```
âŒ https://bailian.aliyun.com/v1/api/completions
âŒ https://bailian.console.aliyun.com/...
```

**åŸå› **: è¿™äº›æ˜¯æ§åˆ¶å°ç½‘å€,ä¸æ˜¯ API endpoint

### é”™è¯¯ 2: ä½¿ç”¨é”™è¯¯çš„è·¯å¾„

```
âŒ https://dashscope.aliyuncs.com/api/v1/completions
âŒ https://dashscope.aliyuncs.com/v1/chat/completions
```

**åŸå› **: è·¯å¾„ä¸æ­£ç¡®,åº”è¯¥ä½¿ç”¨å®Œæ•´çš„æœåŠ¡è·¯å¾„

### é”™è¯¯ 3: API Key æ ¼å¼é”™è¯¯

```
âŒ your-llm-api-key
âŒ abc123
```

**åŸå› **: API Key åº”è¯¥ä»¥ `sk-` å¼€å¤´

---

## ğŸ” å¦‚ä½•éªŒè¯é…ç½®

### æ–¹æ³• 1: åœ¨åº”ç”¨ä¸­æµ‹è¯•

1. æ‰“å¼€è®¾ç½®é¡µé¢
2. å¡«å†™ API Key å’Œ Endpoint
3. ç‚¹å‡» **"æµ‹è¯• AI å¯¹è¯"**
4. æŸ¥çœ‹æµ‹è¯•ç»“æœ

### æ–¹æ³• 2: æŸ¥çœ‹åç«¯æ—¥å¿—

```powershell
docker-compose logs backend -f
```

**æ­£ç¡®çš„æ—¥å¿—**:
```
[æ—¶é—´] ä»£ç†è¯·æ±‚åˆ°é˜¿é‡Œäº‘ç™¾ç‚¼: https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation
[æ—¶é—´] é˜¿é‡Œäº‘APIå“åº”æˆåŠŸ
```

**é”™è¯¯çš„æ—¥å¿—**:
```
[æ—¶é—´] é˜¿é‡Œäº‘APIé”™è¯¯: { status: 404, statusText: 'Not Found', error: {} }
```

### æ–¹æ³• 3: ä½¿ç”¨ curl æµ‹è¯•

```bash
curl -X POST \
  https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "model": "qwen-plus",
    "input": {
      "messages": [
        {
          "role": "user",
          "content": "ä½ å¥½"
        }
      ]
    },
    "parameters": {
      "result_format": "message"
    }
  }'
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### å®˜æ–¹æ–‡æ¡£
- **é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°**: https://bailian.console.aliyun.com
- **DashScope API æ–‡æ¡£**: https://help.aliyun.com/zh/dashscope/developer-reference/api-details
- **å¿«é€Ÿå¼€å§‹**: https://help.aliyun.com/zh/model-studio/getting-started/first-api-call-to-qwen

### é¡¹ç›®æ–‡æ¡£
- **é˜¿é‡Œäº‘ç™¾ç‚¼APIé…ç½®æŒ‡å—.md** - è¯¦ç»†é…ç½®è¯´æ˜
- **éƒ¨ç½²æˆåŠŸ_Docker.md** - Docker éƒ¨ç½²æŒ‡å—
- **README.md** - é¡¹ç›®æ€»è§ˆ

---

## ğŸ¯ æ€»ç»“

### é—®é¢˜
- ç”¨æˆ·é…ç½®äº†é”™è¯¯çš„ API Endpoint
- ä½¿ç”¨äº†æ§åˆ¶å°åœ°å€è€Œä¸æ˜¯ API åœ°å€

### è§£å†³
1. âœ… ä¼˜åŒ–è®¾ç½®é¡µé¢,æ·»åŠ è¯¦ç»†æç¤ºå’Œç¤ºä¾‹
2. âœ… åˆ›å»ºé…ç½®æŒ‡å—æ–‡æ¡£
3. âœ… é‡æ–°æ„å»ºå‰ç«¯åº”ç”¨

### ç»“æœ
- ç”¨æˆ·å¯ä»¥çœ‹åˆ°æ­£ç¡®çš„é…ç½®ç¤ºä¾‹
- æœ‰è¯¦ç»†çš„æ–‡æ¡£æŒ‡å¯¼
- å¯ä»¥æ­£ç¡®é…ç½®å¹¶ä½¿ç”¨ AI æœåŠ¡

---

**ä¿®å¤æ—¶é—´**: 2025-10-29  
**ä¿®å¤æ–‡ä»¶**: 
- `frontend/src/pages/Settings.tsx`
- `é˜¿é‡Œäº‘ç™¾ç‚¼APIé…ç½®æŒ‡å—.md`
- `AIæœåŠ¡404é”™è¯¯ä¿®å¤è¯´æ˜.md` (æœ¬æ–‡æ¡£)

**çŠ¶æ€**: âœ… å·²ä¿®å¤å¹¶éƒ¨ç½²

